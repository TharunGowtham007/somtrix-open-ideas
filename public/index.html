<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SOMTRIX&trade; — Ideas Hub</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg-top:#eef2fb; --bg-mid:#dfe7ff; --accent:#7F8CBD;
      --card:#fff; --muted:#6c7689; --radius:22px; --shadow:0 18px 40px rgba(22,34,54,0.08);
      --maxw:1100px; --gap:18px; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      background: linear-gradient(145deg,var(--bg-top) 0,var(--bg-mid) 60%);
      color:#111;
      -webkit-font-smoothing:antialiased;
    }
    .wrap{max-width:var(--maxw);margin:28px auto;padding:18px}
    header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
    .logo{width:72px;height:72px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 12px 28px rgba(0,0,0,0.08)}
    .brand{font-weight:800;font-size:18px;letter-spacing:0.06em}
    .tag{color:var(--muted);font-size:13px}
    nav{margin-left:auto;display:flex;gap:12px;align-items:center}
    .navlink{color:var(--muted);text-decoration:underline; text-underline-offset:4px; font-size:14px}
    main.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px;border:1px solid rgba(200,210,230,0.6)}
    h1{margin:0;font-size:26px}
    .lead{color:var(--muted);margin-top:6px;margin-bottom:14px}
    .choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;margin-top:12px}
    .choice{background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:16px;padding:16px;border:1px solid rgba(220,230,245,0.9);box-shadow:0 8px 26px rgba(16,25,40,0.04)}
    .choice h3{margin:0;font-size:16px}
    .choice p{color:var(--muted);font-size:13px;margin:8px 0 12px}
    .btn{display:inline-block;padding:8px 14px;border-radius:999px;background:var(--accent);color:#fff;text-decoration:none;font-weight:600}
    .flex-bottom{display:flex;align-items:center;gap:12px}
    /* product preview card small (on index) */
    .product-preview{display:flex;gap:10px;align-items:center}
    .product-thumb{width:72px;height:72px;border-radius:10px;background:#f6f8ff;display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid rgba(200,210,230,0.7)}
    .product-thumb img{width:100%;height:100%;object-fit:cover}
    .product-meta{font-size:13px;color:var(--muted)}
    footer{margin-top:24px;text-align:center;color:var(--muted);font-size:12px;padding-bottom:30px}
    @media (max-width:720px){
      .wrap{padding:12px;margin:16px auto}
      header{gap:10px}
      .brand{font-size:16px}
      nav{display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <img src="logo.png" alt="SOMTRIX" style="width:56px;height:56px" onerror="this.style.display='none'">
      </div>
      <div>
        <div class="brand">SOMTRIX&trade;</div>
        <div class="tag">Open innovation · Public ideas board</div>
      </div>

      <nav>
        <a class="navlink" href="how-it-works.html">How this board works</a>
        <a class="navlink" href="apply.html">Apply to join</a>
        <a class="navlink" href="products.html">Products</a>
      </nav>
    </header>

    <main class="card">
      <div style="display:flex;align-items:flex-start;gap:18px;flex-wrap:wrap">
        <div style="flex:1;min-width:260px">
          <h1>Welcome to the <span style="color:var(--accent)">SOMTRIX&trade;</span> Ideas Hub.</h1>
          <div class="lead">This is a public space where anyone can share ideas with SOMTRIX&trade; and support ideas from others. Choose what you want to do today.</div>
        </div>
      </div>

      <section style="margin-top:18px">
        <h2 style="font-size:18px;margin-bottom:8px">What would you like to do?</h2>
        <div class="choices" id="choices">
          <article class="choice">
            <h3>Publish a new idea</h3>
            <p>Describe a real problem and your idea direction. Your idea will appear on the public board.</p>
            <a class="btn" href="publish.html">Go to publish</a>
          </article>

          <article class="choice">
            <h3>Browse & vote ideas</h3>
            <p>Scroll through ideas from others and tap "Support" to vote for the ones you like.</p>
            <a class="btn" href="vote.html">Go to voting</a>
          </article>

          <article class="choice">
            <h3>Products & updates</h3>
            <p>See SOMTRIX&trade; products and progress. Click a product to view updates and comment.</p>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <a class="btn" href="products.html">View products</a>
              <div id="mini-products" style="margin-left:12px"></div>
            </div>
          </article>
        </div>
      </section>

    </main>

    <footer>Note: This board is public. Do not submit confidential or legally sensitive material.</footer>
  </div>

  <script>
    // Load up to 3 recent products and show small previews on the index page
    async function loadMiniProducts(){
      try{
        const res = await fetch('/api/products');
        if(!res.ok) return;
        const items = await res.json();
        const container = document.getElementById('mini-products');
        container.innerHTML = '';
        const show = items.slice(0,3);
        show.forEach(p=>{
          const el = document.createElement('div');
          el.className = 'product-preview';
          el.style.marginLeft = '10px';
          const thumb = document.createElement('div'); thumb.className='product-thumb';
          thumb.innerHTML = p.cover ? `<img src="${p.cover}" alt="">` : '<div style="color:#7f8cbd">No image</div>';
          const meta = document.createElement('div'); meta.className='product-meta';
          meta.innerHTML = `<div style="font-weight:700">${p.name}</div><div style="font-size:12px">${p.status||'—'}</div>`;
          el.appendChild(thumb); el.appendChild(meta);
          el.style.cursor = 'pointer';
          el.onclick = () => location.href = `product.html?id=${p.id}`;
          container.appendChild(el);
        });
      }catch(e){ console.error(e); }
    }
    document.addEventListener('DOMContentLoaded', loadMiniProducts);
  </script>
</body>
</html>
